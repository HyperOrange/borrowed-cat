{% extends 'base.html' %}
{% load static %}

{% block title %}할 일 목록{% endblock %}

{% block head %}
    <!-- 폰트 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
    <!-- Anima CSS (정적 경로) -->
    <link rel="stylesheet" href="{% static 'todo_list/css/globals.css' %}" />
    <link rel="stylesheet" href="{% static 'todo_list/css/styleguide.css' %}" />
    <link rel="stylesheet" href="{% static 'todo_list/css/style.css' %}" />

    <style>
        /* 모바일웹 컨테이너 */
        .app {
            max-width: 414px;
            margin: 0 auto;
            min-height: 100dvh;
            padding: max(12px, env(safe-area-inset-top)) 16px max(12px, env(safe-area-inset-bottom));
            background: #fff;
            font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
        }
        img { max-width: 100%; height: auto; }
        /* 상단 헤더 정렬 보정 */
        .frame { display:flex; align-items:center; gap:8px; padding:8px 0; }
        .frame .div { font-weight:700; font-size:20px; }
        .icon-chevron-left { display:inline-flex; width:24px; height:24px; }
        .indicator { padding:8px 0; }
    </style>
{% endblock %}

{% block content %}
    <main class="app">
        <!-- 상단 헤더 -->
        <div class="frame">
            <a class="icon-chevron-left" href="{% url 'main_page' team_id=team_id %}" aria-label="뒤로가기">
                <img class="vector" src="{% static 'todo_list/img/vector.svg' %}" alt="back" />
            </a>
            <div class="div">To -Do list</div>
        </div>

        <div class="indicator"><div class="line"></div></div>

        <!-- 목록 -->
        <section aria-label="Todo items">
            <!-- todo items will be rendered here -->
            {% for todo in todos %}
            <div class="overlap-2">
                <p class="text-wrapper-2">[{{ todo.title }}]<br />맡은이: {{ todo.assignee }}<br />마감일: {{ todo.due_date }}</p>
                <img class="img" src="{% static 'todo_list/img/rectangle-4208.svg' %}" alt="" />
                <img class="image" src="{% static 'todo_list/img/image-61.png' %}" alt="" />
            </div>
            {% empty %}
            <p>할 일이 없습니다. 새로운 할 일을 추가해주세요.</p>
            {% endfor %}
        </section>

        <!-- + 버튼: 신규 추가 페이지로 이동 -->
        <a class="group" href="{% url 'todo_list:add' team_id=team_id %}" aria-label="할 일 추가">
            <div class="div-wrapper"><div class="text-wrapper-3">+</div></div>
        </a>
    </main>
{% endblock %}
