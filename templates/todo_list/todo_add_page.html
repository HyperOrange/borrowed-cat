{% extends 'base.html' %}
{% load static %}

{% block title %}할 일 추가{% endblock %}

{% block head %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
    <link rel="stylesheet" href="{% static 'todo_list/css/globals.css' %}" />
    <link rel="stylesheet" href="{% static 'todo_list/css/styleguide.css' %}" />
    <link rel="stylesheet" href="{% static 'todo_list/css/style.css' %}" />

    <style>
        .app {
            max-width: 414px; margin: 0 auto; min-height: 100dvh;
            padding: max(12px, env(safe-area-inset-top)) 16px max(12px, env(safe-area-inset-bottom));
            background: #fff; font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
        }
        img{max-width:100%; height:auto;}
        .frame { display:flex; align-items:center; gap:8px; padding:8px 0; }
        .frame .text-wrapper-3 { font-weight:700; font-size:20px; }
        .icon-chevron-left { display:inline-flex; width:24px; height:24px; }
        .floating-card{ position:relative; border-radius:16px; overflow:hidden; }
        .btn-primary{ display:inline-flex; align-items:center; justify-content:center;
            border-radius:12px; padding:12px 16px; background:#222; color:#fff; font-weight:600; }
        .input, .select, .textarea{
            width:100%; box-sizing:border-box; padding:12px; border:1px solid #E5E7EB; border-radius:12px; background:#fff;
            font-size:15px;
        }
        .field{ display:grid; gap:8px; margin:12px 0; }
    </style>
{% endblock %}

{% block content %}
    <main class="app">
        <div class="frame">
            <a class="icon-chevron-left" href="{% url 'todo_list:list' team_id=team_id %}" aria-label="뒤로가기">
                <img class="vector" src="{% static 'todo_list/img/vector.svg' %}" alt="back" />
            </a>
            <div class="text-wrapper-3">할 일 추가</div>
        </div>

        <div class="indicator"><div class="line"></div></div>

        <img class="rectangle-11" src="{% static 'todo_list/img/rectangle-249.svg' %}" alt="" />

        <form id="todo-add-form" class="floating-card" style="padding:16px; background:#fff;" action="{% url 'todo_list:add' team_id=team_id %}" method="post">
            {% csrf_token %}

            <div class="field">
                <label for="title" class="text-wrapper-15">할 일을 입력해주세요</label>
                <input id="title" name="title" class="input" type="text" placeholder="예) 발표자료 목차 잡기" required />
            </div>

            <div class="field">
                <label for="due_date" class="text-wrapper-16">마감기한을 정해주세요</label>
                <input id="due_date" name="due_date" class="input" type="date" />
            </div>

            <div class="field">
                <label for="assignee_id" class="text-wrapper-17">담당자를 정해주세요</label>
                <select id="assignee_id" name="assignee_id" class="select">
                    <option value="">선택 안 함</option>
                    {% for member in members %}
                    <option value="{{ member.id }}">{{ member.nickname }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="field">
                <label for="priority" class="text-wrapper-18">우선순위</label>
                <select id="priority" name="priority" class="select">
                    <option value="M">중</option>
                    <option value="H">상</option>
                    <option value="L">하</option>
                </select>
            </div>

            <div class="field">
                <label for="description" class="text-wrapper-18">메모를 적어주세요</label>
                <textarea id="description" name="description" class="textarea" rows="4" placeholder="설명(선택)"></textarea>
            </div>

            <div style="display:flex; gap:8px; margin-top:16px;">
                <button type="submit" class="btn-primary">추가하기</button>
                <a href="{% url 'todo_list:list' team_id=team_id %}" class="btn-primary" style="background:#F3F4F6; color:#111;">
                    취소
                </a>
            </div>
        </form>
    </main>
{% endblock %}